<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>2D FSAE simulator: src/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">2D FSAE simulator
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main implementation of the 2D FSAE Simulation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;allegro.h&gt;</code><br />
<code>#include &quot;<a class="el" href="control_8h_source.html">control.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="display_8h_source.html">display.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="perception_8h_source.html">perception.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tasks_8h_source.html">tasks.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trajectory_8h_source.html">trajectory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utilities_8h_source.html">utilities.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vehicle_8h_source.html">vehicle.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ptask_8h_source.html">ptask.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.c:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c__incl.svg" width="848" height="486"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a56e75a6913a3cb4da05b9f7d02116e7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a56e75a6913a3cb4da05b9f7d02116e7a">init_allegro</a> ()</td></tr>
<tr class="separator:a56e75a6913a3cb4da05b9f7d02116e7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f21658ab78ff07401a1c66eba62c0dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a7f21658ab78ff07401a1c66eba62c0dd">init_track</a> ()</td></tr>
<tr class="separator:a7f21658ab78ff07401a1c66eba62c0dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cb642cbefeb5eca23c4a56384ce8b6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a7cb642cbefeb5eca23c4a56384ce8b6b">init_car</a> ()</td></tr>
<tr class="separator:a7cb642cbefeb5eca23c4a56384ce8b6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a4df149a98808357f97ece821bc653a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a8a4df149a98808357f97ece821bc653a">init_perception</a> ()</td></tr>
<tr class="separator:a8a4df149a98808357f97ece821bc653a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a632e1b0925c0e3555aa4bfda0ebf5375"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a632e1b0925c0e3555aa4bfda0ebf5375">init_visual_controls</a> ()</td></tr>
<tr class="separator:a632e1b0925c0e3555aa4bfda0ebf5375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba20fd6daf4d6ab1e47675b3c1f1ca6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a6ba20fd6daf4d6ab1e47675b3c1f1ca6">init_bitmaps</a> ()</td></tr>
<tr class="separator:a6ba20fd6daf4d6ab1e47675b3c1f1ca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10da25e92e69613be93d099bb029feb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a10da25e92e69613be93d099bb029feb2">update_screen</a> ()</td></tr>
<tr class="separator:a10da25e92e69613be93d099bb029feb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af157d4a7f2f1670050ead305cbe70248"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#af157d4a7f2f1670050ead305cbe70248">init_trajectory</a> ()</td></tr>
<tr class="separator:af157d4a7f2f1670050ead305cbe70248"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aee5ee0d6a8a10e195acbec5ee97f65d9"><td class="memItemLeft" align="right" valign="top">const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aee5ee0d6a8a10e195acbec5ee97f65d9">filename</a> [100] = &quot;track/cones.yaml&quot;</td></tr>
<tr class="memdesc:aee5ee0d6a8a10e195acbec5ee97f65d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Application entry point.  <a href="main_8c.html#aee5ee0d6a8a10e195acbec5ee97f65d9">More...</a><br /></td></tr>
<tr class="separator:aee5ee0d6a8a10e195acbec5ee97f65d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e623663b0b1a3e2449b3a0aeed072b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a6e623663b0b1a3e2449b3a0aeed072b8">car_x_px</a></td></tr>
<tr class="separator:a6e623663b0b1a3e2449b3a0aeed072b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16f747457af3fec4e501df296273d884"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a16f747457af3fec4e501df296273d884">car_y_px</a></td></tr>
<tr class="separator:a16f747457af3fec4e501df296273d884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebc4ddfcc9e8dbfbf7bdc903253ddc88"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aebc4ddfcc9e8dbfbf7bdc903253ddc88">car_bitmap_x</a></td></tr>
<tr class="separator:aebc4ddfcc9e8dbfbf7bdc903253ddc88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b8d5e8283b8122d832daee99cc3f0d3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a9b8d5e8283b8122d832daee99cc3f0d3">car_bitmap_y</a></td></tr>
<tr class="separator:a9b8d5e8283b8122d832daee99cc3f0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main implementation of the 2D FSAE Simulation. </p>
<p>This file initializes the Allegro graphics library, sets up various bitmaps for simulation elements, and creates periodic tasks for perception, trajectory, control, and display. It also handles input, such as waiting for the user to press ESC to exit the simulation.</p>
<p>These routines configure the graphical environment, load assets (bitmaps), and initialize the simulation track including cones from an external YAML file. The program makes use of a periodic task system (using SCHED_OTHER) and employs mutexes to synchronize drawing operations. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a56e75a6913a3cb4da05b9f7d02116e7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56e75a6913a3cb4da05b9f7d02116e7a">&#9670;&nbsp;</a></span>init_allegro()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_allegro </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_a56e75a6913a3cb4da05b9f7d02116e7a_icgraph.svg" width="208" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6ba20fd6daf4d6ab1e47675b3c1f1ca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ba20fd6daf4d6ab1e47675b3c1f1ca6">&#9670;&nbsp;</a></span>init_bitmaps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_bitmaps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_a6ba20fd6daf4d6ab1e47675b3c1f1ca6_cgraph.svg" width="519" height="240"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_a6ba20fd6daf4d6ab1e47675b3c1f1ca6_icgraph.svg" width="216" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7cb642cbefeb5eca23c4a56384ce8b6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cb642cbefeb5eca23c4a56384ce8b6b">&#9670;&nbsp;</a></span>init_car()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_car </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_a7cb642cbefeb5eca23c4a56384ce8b6b_icgraph.svg" width="335" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8a4df149a98808357f97ece821bc653a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a4df149a98808357f97ece821bc653a">&#9670;&nbsp;</a></span>init_perception()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_perception </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_a8a4df149a98808357f97ece821bc653a_icgraph.svg" width="383" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7f21658ab78ff07401a1c66eba62c0dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f21658ab78ff07401a1c66eba62c0dd">&#9670;&nbsp;</a></span>init_track()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_track </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_a7f21658ab78ff07401a1c66eba62c0dd_cgraph.svg" width="303" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_a7f21658ab78ff07401a1c66eba62c0dd_icgraph.svg" width="347" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af157d4a7f2f1670050ead305cbe70248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af157d4a7f2f1670050ead305cbe70248">&#9670;&nbsp;</a></span>init_trajectory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_trajectory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_af157d4a7f2f1670050ead305cbe70248_icgraph.svg" width="378" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a632e1b0925c0e3555aa4bfda0ebf5375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a632e1b0925c0e3555aa4bfda0ebf5375">&#9670;&nbsp;</a></span>init_visual_controls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_visual_controls </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_a632e1b0925c0e3555aa4bfda0ebf5375_icgraph.svg" width="412" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_a840291bc02cba5474a4cb46a9b9566fe_cgraph.svg" width="878" height="779"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a10da25e92e69613be93d099bb029feb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10da25e92e69613be93d099bb029feb2">&#9670;&nbsp;</a></span>update_screen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_screen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_a10da25e92e69613be93d099bb029feb2_cgraph.svg" width="336" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="main_8c_a10da25e92e69613be93d099bb029feb2_icgraph.svg" width="231" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aebc4ddfcc9e8dbfbf7bdc903253ddc88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebc4ddfcc9e8dbfbf7bdc903253ddc88">&#9670;&nbsp;</a></span>car_bitmap_x</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int car_bitmap_x</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9b8d5e8283b8122d832daee99cc3f0d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b8d5e8283b8122d832daee99cc3f0d3">&#9670;&nbsp;</a></span>car_bitmap_y</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int car_bitmap_y</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6e623663b0b1a3e2449b3a0aeed072b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e623663b0b1a3e2449b3a0aeed072b8">&#9670;&nbsp;</a></span>car_x_px</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int car_x_px</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a16f747457af3fec4e501df296273d884"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16f747457af3fec4e501df296273d884">&#9670;&nbsp;</a></span>car_y_px</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int car_y_px</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aee5ee0d6a8a10e195acbec5ee97f65d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee5ee0d6a8a10e195acbec5ee97f65d9">&#9670;&nbsp;</a></span>filename</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char filename[100] = &quot;track/cones.yaml&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Application entry point. </p>
<p>The <a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a> function initializes the graphics system, creates display bitmaps, and sets up periodic tasks for different simulation modules:</p><ul>
<li>Perception: processes sensor data to detect environment features.</li>
<li>Trajectory: calculates the planned path for the vehicle.</li>
<li>Control: manages vehicle control based on perception and trajectory.</li>
<li>Display: updates the visual representation of the simulation.</li>
</ul>
<p>After task creation, the main loop waits for all tasks to terminate (typically on ESC key press), cleans up the graphical buffers, and exits the simulation.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="main_8c.html#a56e75a6913a3cb4da05b9f7d02116e7a">init_allegro()</a>, <a class="el" href="main_8c.html#a6ba20fd6daf4d6ab1e47675b3c1f1ca6">init_bitmaps()</a>, <a class="el" href="main_8c.html#a10da25e92e69613be93d099bb029feb2">update_screen()</a>, <a class="el" href="ptask_8h.html#a88099c7c946b1d8c34a3717e5d3b8b83">task_create()</a>, <a class="el" href="ptask_8h.html#a9142a39d7c9be6b98ce01f0c7541d8f7">wait_for_task_end()</a></dd></dl>
<p>Initializes the Allegro graphics system.</p>
<p>Sets up the graphics data structures, installs keyboard and mouse handlers, and configures the graphics mode. It defines the color depth and initializes several colors (e.g., grass green, asphalt gray, pink) used throughout the simulation. The display window is created with a title and switch mode, and finally the screen is cleared.</p>
<dl class="section see"><dt>See also</dt><dd>allegro_init(), install_keyboard(), install_mouse(), set_gfx_mode(), set_window_title(), clear_to_color()</dd></dl>
<p>Initializes the track bitmap.</p>
<p>Creates a bitmap representing the track and clears it to an asphalt color. It loads cone positions from an external YAML configuration file and plots track cones on the track bitmap. Only valid cones (with a valid color) are rendered, using a radius scaled to pixels per meter.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utilities_8h.html#a77d50bbb4a4844ce7ddab4a7b3d52d24">load_cones_positions()</a>, <a class="el" href="utilities_8h.html#a5297509bfed850c9f8cb92b994b7fd75" title="Initializes an array of cone structures.">init_cones()</a>, clear_bitmap(), circlefill()</dd></dl>
<p>Initializes the car bitmap and positions.</p>
<p>Loads the car sprite bitmap from a file. It computes the car position in pixels, ensuring that the car's graphical representation is centered on its logical position by offsetting the bitmapâ€™s top-left coordinates.</p>
<dl class="section see"><dt>See also</dt><dd>load_bitmap(), clear_bitmap(), circlefill()</dd></dl>
<p>Initializes the perception bitmap.</p>
<p>Creates a dedicated bitmap for representing the perceptual data (e.g., sensor outputs) of the simulation. The dimensions are based on the maximum range of the sensor (scaled by pixels per meter), ensuring that the bitmap covers the necessary area for sensor information. The bitmap is cleared and set to a transparent color.</p>
<dl class="section see"><dt>See also</dt><dd>create_bitmap(), clear_bitmap(), clear_to_color()</dd></dl>
<p>Initializes the trajectory bitmap.</p>
<p>This function creates and configures the bitmap that visualizes the calculated trajectory path. The bitmap is cleared and its background is set transparent (using the designated pink color).</p>
<dl class="section see"><dt>See also</dt><dd>create_bitmap(), clear_bitmap(), clear_to_color()</dd></dl>
<p>Initializes visual control elements.</p>
<p>Loads and initializes bitmaps for user visual controls such as the steering wheel (bitmap for steering) and a visual throttle gauge. In case of any loading error, the application exits with an error message.</p>
<dl class="section see"><dt>See also</dt><dd>load_bitmap(), create_bitmap(), clear_bitmap(), clear_to_color()</dd></dl>
<p>Initializes all bitmaps used for displaying the simulation.</p>
<p>Creates the display buffer and background bitmaps, clearing them to the proper color. Then, it calls several initialization functions that prepare all simulation-specific bitmaps (track, car, perception, trajectory, and visual controls).</p>
<dl class="section see"><dt>See also</dt><dd>create_bitmap(), <a class="el" href="main_8c.html#a7f21658ab78ff07401a1c66eba62c0dd">init_track()</a>, <a class="el" href="main_8c.html#a7cb642cbefeb5eca23c4a56384ce8b6b">init_car()</a>, <a class="el" href="main_8c.html#a8a4df149a98808357f97ece821bc653a">init_perception()</a>, <a class="el" href="main_8c.html#af157d4a7f2f1670050ead305cbe70248">init_trajectory()</a>, <a class="el" href="main_8c.html#a632e1b0925c0e3555aa4bfda0ebf5375">init_visual_controls()</a></dd></dl>
<p>Updates the display screen.</p>
<p>Locks a mutex to prevent concurrent drawing modifications, clears the display buffer, and performs a series of drawing operations:</p><ul>
<li>Renders the steering wheel with rotation and scaling.</li>
<li>Draws the background and track bitmaps.</li>
<li>Rotates, scales, and draws the car sprite ensuring correct orientation.</li>
<li>Draws the perception and trajectory bitmaps. Finally, the updated display buffer is blitted to the actual screen, and the mutex is unlocked.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd>pthread_mutex_lock(), clear_to_color(), rotate_scaled_sprite(), draw_sprite(), blit(), pthread_mutex_unlock() </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
