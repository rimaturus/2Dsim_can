<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>2D FSAE simulator: src/display.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">2D FSAE simulator
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">display.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Rendering and display update functions for the 2D simulation using Allegro.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;allegro.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="globals_8h_source.html">globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="perception_8h_source.html">perception.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trajectory_8h_source.html">trajectory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utilities_8h_source.html">utilities.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="control_8h_source.html">control.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vehicle_8h_source.html">vehicle.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="display_8h_source.html">display.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for display.c:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c__incl.svg" width="824" height="411"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a264238ff7dcf301bbc2f190ea7dcea4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a264238ff7dcf301bbc2f190ea7dcea4c">draw_dir_arrow</a> ()</td></tr>
<tr class="memdesc:a264238ff7dcf301bbc2f190ea7dcea4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draws a directional arrow representing the car's orientation.  <a href="display_8c.html#a264238ff7dcf301bbc2f190ea7dcea4c">More...</a><br /></td></tr>
<tr class="separator:a264238ff7dcf301bbc2f190ea7dcea4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a4e859fcc5ddef923afe9a8a674826"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a01a4e859fcc5ddef923afe9a8a674826">draw_car</a> (float <a class="el" href="globals_8c.html#a4a4a6918df3caa78a889c76207349a02">car_x</a>, float <a class="el" href="globals_8c.html#a2ff6267ace75a40353ce62fdb02b9e67">car_y</a>, int <a class="el" href="globals_8c.html#ad9878a31df3b8d7db61cf55b7eb07cd4">car_angle</a>)</td></tr>
<tr class="memdesc:a01a4e859fcc5ddef923afe9a8a674826"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renders the car sprite rotated to its current angle.  <a href="display_8c.html#a01a4e859fcc5ddef923afe9a8a674826">More...</a><br /></td></tr>
<tr class="separator:a01a4e859fcc5ddef923afe9a8a674826"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92e08b949df5d8a8e5edec1dd86bc360"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a92e08b949df5d8a8e5edec1dd86bc360">draw_track</a> ()</td></tr>
<tr class="memdesc:a92e08b949df5d8a8e5edec1dd86bc360"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draws the track.  <a href="display_8c.html#a92e08b949df5d8a8e5edec1dd86bc360">More...</a><br /></td></tr>
<tr class="separator:a92e08b949df5d8a8e5edec1dd86bc360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c07cb2dc1adb076383bced84f4a8154"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a5c07cb2dc1adb076383bced84f4a8154">draw_lidar</a> (<a class="el" href="structpointcloud__t.html">pointcloud_t</a> *<a class="el" href="globals_8c.html#a6579cbc24dcb1c6ec71ccdcf287e01f7">measures</a>)</td></tr>
<tr class="memdesc:a5c07cb2dc1adb076383bced84f4a8154"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draws the lidar/perception view.  <a href="display_8c.html#a5c07cb2dc1adb076383bced84f4a8154">More...</a><br /></td></tr>
<tr class="separator:a5c07cb2dc1adb076383bced84f4a8154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a298532c4740f2a6785e5c1b0ff7fea9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a298532c4740f2a6785e5c1b0ff7fea9a">draw_detected_cones</a> (<a class="el" href="structcone.html">cone</a> *<a class="el" href="group__PerceptionModule.html#gaab5237f191baaef95b94ad0686b40aa6">detected_cones</a>)</td></tr>
<tr class="memdesc:a298532c4740f2a6785e5c1b0ff7fea9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renders the detected cones on the perception bitmap.  <a href="display_8c.html#a298532c4740f2a6785e5c1b0ff7fea9a">More...</a><br /></td></tr>
<tr class="separator:a298532c4740f2a6785e5c1b0ff7fea9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa45d316f5e50fa968e686d790d57457b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#aa45d316f5e50fa968e686d790d57457b">draw_cone_map</a> (<a class="el" href="structcone.html">cone</a> *<a class="el" href="group__PerceptionModule.html#gaefe2c104bad3e859c0f123af113abc22">track_map</a>, int <a class="el" href="group__PerceptionModule.html#ga7b64bf8a899686d6bf0c7d6c65e9d522">track_map_idx</a>)</td></tr>
<tr class="memdesc:aa45d316f5e50fa968e686d790d57457b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draws the cone map overlay.  <a href="display_8c.html#aa45d316f5e50fa968e686d790d57457b">More...</a><br /></td></tr>
<tr class="separator:aa45d316f5e50fa968e686d790d57457b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd5437d29ba24cfc00dbd2f9f6b0cd28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#acd5437d29ba24cfc00dbd2f9f6b0cd28">draw_perception</a> ()</td></tr>
<tr class="memdesc:acd5437d29ba24cfc00dbd2f9f6b0cd28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renders the complete perception layer.  <a href="display_8c.html#acd5437d29ba24cfc00dbd2f9f6b0cd28">More...</a><br /></td></tr>
<tr class="separator:acd5437d29ba24cfc00dbd2f9f6b0cd28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d077fa92b741d504d6ef5c5f2fdd74c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a2d077fa92b741d504d6ef5c5f2fdd74c">draw_trajectory</a> (<a class="el" href="structwaypoint.html">waypoint</a> *<a class="el" href="trajectory_8c.html#a525ffa7b5c81396c8024ff1f8d9e7015">trajectory</a>)</td></tr>
<tr class="memdesc:a2d077fa92b741d504d6ef5c5f2fdd74c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draws the trajectory of the car.  <a href="display_8c.html#a2d077fa92b741d504d6ef5c5f2fdd74c">More...</a><br /></td></tr>
<tr class="separator:a2d077fa92b741d504d6ef5c5f2fdd74c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a385702fb79f2c451da015c3147f80515"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a385702fb79f2c451da015c3147f80515">draw_controls</a> ()</td></tr>
<tr class="memdesc:a385702fb79f2c451da015c3147f80515"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draws user control indicators.  <a href="display_8c.html#a385702fb79f2c451da015c3147f80515">More...</a><br /></td></tr>
<tr class="separator:a385702fb79f2c451da015c3147f80515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2eb9ba074b23fc3b4a91c98e0c83c8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#aa2eb9ba074b23fc3b4a91c98e0c83c8b">update_display</a> ()</td></tr>
<tr class="memdesc:aa2eb9ba074b23fc3b4a91c98e0c83c8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the entire display.  <a href="display_8c.html#aa2eb9ba074b23fc3b4a91c98e0c83c8b">More...</a><br /></td></tr>
<tr class="separator:aa2eb9ba074b23fc3b4a91c98e0c83c8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdb9fae5dfda6a7b08efb162b243c776"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#abdb9fae5dfda6a7b08efb162b243c776">display_pedal</a> (BITMAP *bitmap)</td></tr>
<tr class="separator:abdb9fae5dfda6a7b08efb162b243c776"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bcee09191f66649a2968b6f2ba32935"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a5bcee09191f66649a2968b6f2ba32935">draw_button</a> (<a class="el" href="structButton.html">Button</a> *btn, BITMAP *buffer)</td></tr>
<tr class="separator:a5bcee09191f66649a2968b6f2ba32935"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8d31ca92b9f08b9b8dc134fdbd743bdd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a8d31ca92b9f08b9b8dc134fdbd743bdd">btn_state_cones</a> = 0</td></tr>
<tr class="separator:a8d31ca92b9f08b9b8dc134fdbd743bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affd8bbaa3d95ef6b438022021db1c543"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#affd8bbaa3d95ef6b438022021db1c543">btn_state_perception</a> = 1</td></tr>
<tr class="separator:affd8bbaa3d95ef6b438022021db1c543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5570a5cf15524c61e14cffd271dbf78"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#ac5570a5cf15524c61e14cffd271dbf78">btn_state_map</a> = 1</td></tr>
<tr class="separator:ac5570a5cf15524c61e14cffd271dbf78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9910257ef3a26317a779fc9e77d41d58"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a9910257ef3a26317a779fc9e77d41d58">btn_state_traj</a> = 1</td></tr>
<tr class="separator:a9910257ef3a26317a779fc9e77d41d58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02a9f77d39f15a1769d8dba7aec487cb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a02a9f77d39f15a1769d8dba7aec487cb">btn_state_autonomous</a> = 0</td></tr>
<tr class="separator:a02a9f77d39f15a1769d8dba7aec487cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68347b0753ca586ab50f8651e3bb4a53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structButton.html">Button</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="display_8c.html#a68347b0753ca586ab50f8651e3bb4a53">buttons</a> [<a class="el" href="display_8h.html#afd296c470a4af69caa281bd5ecd5212e">num_buttons</a>]</td></tr>
<tr class="memdesc:a68347b0753ca586ab50f8651e3bb4a53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Periodic perception task.  <a href="display_8c.html#a68347b0753ca586ab50f8651e3bb4a53">More...</a><br /></td></tr>
<tr class="separator:a68347b0753ca586ab50f8651e3bb4a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Rendering and display update functions for the 2D simulation using Allegro. </p>
<p>This file contains functions responsible for drawing various elements of the simulation, including the car sprite, direction indicator, track, lidar/perception display, trajectory, and user controls (e.g., steering wheel and pedal gauge). It also handles the final composition of the display buffer and its transfer to the screen. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="abdb9fae5dfda6a7b08efb162b243c776"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdb9fae5dfda6a7b08efb162b243c776">&#9670;&nbsp;</a></span>display_pedal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_pedal </td>
          <td>(</td>
          <td class="paramtype">BITMAP *&#160;</td>
          <td class="paramname"><em>bitmap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_abdb9fae5dfda6a7b08efb162b243c776_icgraph.svg" width="708" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5bcee09191f66649a2968b6f2ba32935"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bcee09191f66649a2968b6f2ba32935">&#9670;&nbsp;</a></span>draw_button()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void draw_button </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structButton.html">Button</a> *&#160;</td>
          <td class="paramname"><em>btn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BITMAP *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_a5bcee09191f66649a2968b6f2ba32935_icgraph.svg" width="699" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a01a4e859fcc5ddef923afe9a8a674826"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01a4e859fcc5ddef923afe9a8a674826">&#9670;&nbsp;</a></span>draw_car()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void draw_car </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>car_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>car_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>car_angle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renders the car sprite rotated to its current angle. </p>
<p>Draws a car shape on the display.</p>
<p>Calculates the proper position for the car sprite based on its coordinates in the world space (scaled by pixels per meter) and draws it using Allegro's rotate_scaled_sprite function. In DEBUG mode, the function also draws view angle lines to indicate the car's field of view.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">car_x</td><td>The car's x-coordinate in world units. </td></tr>
    <tr><td class="paramname">car_y</td><td>The car's y-coordinate in world units. </td></tr>
    <tr><td class="paramname">car_angle</td><td>The car's angle in degrees. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_a01a4e859fcc5ddef923afe9a8a674826_cgraph.svg" width="300" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_a01a4e859fcc5ddef923afe9a8a674826_icgraph.svg" width="516" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa45d316f5e50fa968e686d790d57457b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa45d316f5e50fa968e686d790d57457b">&#9670;&nbsp;</a></span>draw_cone_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void draw_cone_map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcone.html">cone</a> *&#160;</td>
          <td class="paramname"><em>track_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>track_map_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Draws the cone map overlay. </p>
<p>Draws the cone map (track map).</p>
<p>Iterates through the track map data and draws a white filled circle at each cone's position, properly mapping simulation world coordinates to the perception window.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">track_map</td><td>Pointer to an array of cones representing the track map. </td></tr>
    <tr><td class="paramname">track_map_idx</td><td>The number of valid entries in the track map array. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_aa45d316f5e50fa968e686d790d57457b_icgraph.svg" width="742" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a385702fb79f2c451da015c3147f80515"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a385702fb79f2c451da015c3147f80515">&#9670;&nbsp;</a></span>draw_controls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void draw_controls </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Draws user control indicators. </p>
<p>Renders the steering wheel sprite with the correct rotation and draws a gauge for pedal control. The gauge's fill color indicates the pedal level (green for positive, red for non-positive). </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_a385702fb79f2c451da015c3147f80515_cgraph.svg" width="332" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_a385702fb79f2c451da015c3147f80515_icgraph.svg" width="548" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a298532c4740f2a6785e5c1b0ff7fea9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a298532c4740f2a6785e5c1b0ff7fea9a">&#9670;&nbsp;</a></span>draw_detected_cones()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void draw_detected_cones </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcone.html">cone</a> *&#160;</td>
          <td class="paramname"><em>detected_cones</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renders the detected cones on the perception bitmap. </p>
<p>Draws detected cones.</p>
<p>Iterates through the array of detected cones and draws a filled circle at each cone's location, after mapping the coordinates from the simulation world to the perception window.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">detected_cones</td><td>Pointer to an array of detected cone structures. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_a298532c4740f2a6785e5c1b0ff7fea9a_icgraph.svg" width="776" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a264238ff7dcf301bbc2f190ea7dcea4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a264238ff7dcf301bbc2f190ea7dcea4c">&#9670;&nbsp;</a></span>draw_dir_arrow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void draw_dir_arrow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Draws a directional arrow representing the car's orientation. </p>
<p>Draws a directional arrow.</p>
<p>Computes the arrow's start (at the car's position) and end points based on the car angle, using cosine and sine functions. The arrow shaft and head are drawn as thick green lines, with the head drawn at two angles to form a head shape. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_a264238ff7dcf301bbc2f190ea7dcea4c_icgraph.svg" width="687" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5c07cb2dc1adb076383bced84f4a8154"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c07cb2dc1adb076383bced84f4a8154">&#9670;&nbsp;</a></span>draw_lidar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void draw_lidar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpointcloud__t.html">pointcloud_t</a> *&#160;</td>
          <td class="paramname"><em>measures</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Draws the lidar/perception view. </p>
<p>Draws lidar measurements.</p>
<p>Clears the perception bitmap and centers it on the car's position. For each lidar measurement, computes the global-to-perception window mapping for the detected point and draws a line from the car's center to that point. The color of the line depends on whether a cone was detected or not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">measures</td><td>Pointer to an array of lidar measurements. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_a5c07cb2dc1adb076383bced84f4a8154_icgraph.svg" width="704" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="acd5437d29ba24cfc00dbd2f9f6b0cd28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd5437d29ba24cfc00dbd2f9f6b0cd28">&#9670;&nbsp;</a></span>draw_perception()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void draw_perception </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renders the complete perception layer. </p>
<p>Draws perception results.</p>
<p>Combines the lidar lines, detected cones, and cone map visualizations to create the perception overlay. Afterwards, the perception bitmap is blended onto the main display buffer offset in relation to the car's position. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_acd5437d29ba24cfc00dbd2f9f6b0cd28_cgraph.svg" width="352" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_acd5437d29ba24cfc00dbd2f9f6b0cd28_icgraph.svg" width="566" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a92e08b949df5d8a8e5edec1dd86bc360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92e08b949df5d8a8e5edec1dd86bc360">&#9670;&nbsp;</a></span>draw_track()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void draw_track </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Draws the track. </p>
<p>Checks that the track bitmap has valid dimensions, and if so, draws the track image onto the display buffer. If the bitmap dimensions are invalid, an error message is shown. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_a92e08b949df5d8a8e5edec1dd86bc360_icgraph.svg" width="530" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2d077fa92b741d504d6ef5c5f2fdd74c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d077fa92b741d504d6ef5c5f2fdd74c">&#9670;&nbsp;</a></span>draw_trajectory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void draw_trajectory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structwaypoint.html">waypoint</a> *&#160;</td>
          <td class="paramname"><em>trajectory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Draws the trajectory of the car. </p>
<p>Draws the planned trajectory.</p>
<p>Clears and sets the background for the trajectory bitmap and iterates over each trajectory waypoint, drawing each as a filled circle. In DEBUG mode, the waypoint index is also displayed and an extra line is drawn from the car sprite center.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trajectory</td><td>Pointer to an array of waypoint structures representing the car's trajectory. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_a2d077fa92b741d504d6ef5c5f2fdd74c_icgraph.svg" width="559" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa2eb9ba074b23fc3b4a91c98e0c83c8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2eb9ba074b23fc3b4a91c98e0c83c8b">&#9670;&nbsp;</a></span>update_display()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_display </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the entire display. </p>
<p>Updates the display.</p>
<p>Locks the drawing mutex and sequentially renders the background, track, car, perception, trajectory, title text, and controls on the display buffer. Once all elements are rendered, the display buffer is blitted to the screen, and the mutex is subsequently unlocked. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_aa2eb9ba074b23fc3b4a91c98e0c83c8b_cgraph.svg" width="522" height="342"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="display_8c_aa2eb9ba074b23fc3b4a91c98e0c83c8b_icgraph.svg" width="387" height="63"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a02a9f77d39f15a1769d8dba7aec487cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02a9f77d39f15a1769d8dba7aec487cb">&#9670;&nbsp;</a></span>btn_state_autonomous</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int btn_state_autonomous = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8d31ca92b9f08b9b8dc134fdbd743bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d31ca92b9f08b9b8dc134fdbd743bdd">&#9670;&nbsp;</a></span>btn_state_cones</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int btn_state_cones = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac5570a5cf15524c61e14cffd271dbf78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5570a5cf15524c61e14cffd271dbf78">&#9670;&nbsp;</a></span>btn_state_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int btn_state_map = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="affd8bbaa3d95ef6b438022021db1c543"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affd8bbaa3d95ef6b438022021db1c543">&#9670;&nbsp;</a></span>btn_state_perception</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int btn_state_perception = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9910257ef3a26317a779fc9e77d41d58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9910257ef3a26317a779fc9e77d41d58">&#9670;&nbsp;</a></span>btn_state_traj</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int btn_state_traj = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a68347b0753ca586ab50f8651e3bb4a53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68347b0753ca586ab50f8651e3bb4a53">&#9670;&nbsp;</a></span>buttons</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structButton.html">Button</a> buttons[<a class="el" href="display_8h.html#afd296c470a4af69caa281bd5ecd5212e">num_buttons</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    {20, 20, 150, 30, <span class="stringliteral">&quot;Clean track&quot;</span>, &amp;<a class="code" href="display_8c.html#a8d31ca92b9f08b9b8dc134fdbd743bdd">btn_state_cones</a>},</div>
<div class="line">    {20, 60, 150, 30, <span class="stringliteral">&quot;Lidar&quot;</span>, &amp;<a class="code" href="display_8c.html#affd8bbaa3d95ef6b438022021db1c543">btn_state_perception</a>},</div>
<div class="line">    {20, 100, 150, 30, <span class="stringliteral">&quot;Mapping&quot;</span>, &amp;<a class="code" href="display_8c.html#ac5570a5cf15524c61e14cffd271dbf78">btn_state_map</a>},</div>
<div class="line">    {20, 140, 150, 30, <span class="stringliteral">&quot;Trajectory&quot;</span>, &amp;<a class="code" href="display_8c.html#a9910257ef3a26317a779fc9e77d41d58">btn_state_traj</a>},</div>
<div class="line">    {20, 180, 150, 30, <span class="stringliteral">&quot;Full Autonomous&quot;</span>, &amp;<a class="code" href="display_8c.html#a02a9f77d39f15a1769d8dba7aec487cb">btn_state_autonomous</a>}</div>
<div class="line">}</div>
<div class="ttc" id="adisplay_8c_html_a02a9f77d39f15a1769d8dba7aec487cb"><div class="ttname"><a href="display_8c.html#a02a9f77d39f15a1769d8dba7aec487cb">btn_state_autonomous</a></div><div class="ttdeci">int btn_state_autonomous</div><div class="ttdef"><b>Definition:</b> display.c:28</div></div>
<div class="ttc" id="adisplay_8c_html_a8d31ca92b9f08b9b8dc134fdbd743bdd"><div class="ttname"><a href="display_8c.html#a8d31ca92b9f08b9b8dc134fdbd743bdd">btn_state_cones</a></div><div class="ttdeci">int btn_state_cones</div><div class="ttdef"><b>Definition:</b> display.c:24</div></div>
<div class="ttc" id="adisplay_8c_html_a9910257ef3a26317a779fc9e77d41d58"><div class="ttname"><a href="display_8c.html#a9910257ef3a26317a779fc9e77d41d58">btn_state_traj</a></div><div class="ttdeci">int btn_state_traj</div><div class="ttdef"><b>Definition:</b> display.c:27</div></div>
<div class="ttc" id="adisplay_8c_html_ac5570a5cf15524c61e14cffd271dbf78"><div class="ttname"><a href="display_8c.html#ac5570a5cf15524c61e14cffd271dbf78">btn_state_map</a></div><div class="ttdeci">int btn_state_map</div><div class="ttdef"><b>Definition:</b> display.c:26</div></div>
<div class="ttc" id="adisplay_8c_html_affd8bbaa3d95ef6b438022021db1c543"><div class="ttname"><a href="display_8c.html#affd8bbaa3d95ef6b438022021db1c543">btn_state_perception</a></div><div class="ttdeci">int btn_state_perception</div><div class="ttdef"><b>Definition:</b> display.c:25</div></div>
</div><!-- fragment -->
<p>Periodic perception task. </p>
<p>This task acquires LiDAR measurements, resets the array of detected cones, and performs mapping based on the current position and orientation of the vehicle. After processing the sensor data, it signals the trajectory planning task using a semaphore. The task executes continuously until the ESC key is pressed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Pointer used to determine the task's index.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns NULL.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The function uses a runtime measurement call to monitor its execution time.</dd></dl>
<p>Periodic trajectory planning task.</p>
<p>This task waits for a signal from the perception task to ensure updated sensor data is available. It then calculates a new trajectory for the vehicle based on its current position, orientation, and the detected cones from the environment. The task runs periodically and terminates when the ESC key is pressed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Pointer used to determine the task's index.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns NULL.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The task's operation is encapsulated between runtime measurement calls.</dd></dl>
<p>Periodic control task.</p>
<p>This task is responsible for controlling the vehicle's movement. It chooses between keyboard-based control and autonomous control based on the state of the 'A' key. If autonomous mode is active (i.e., 'A' is pressed), it uses the computed trajectory, otherwise it relies on user input to drive the vehicle. Execution continues until the ESC key is pressed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Pointer used to determine the task's index.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns NULL.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The function uses runtime measurement calls to monitor execution time per cycle.</dd></dl>
<p>Periodic display task.</p>
<p>This task updates the graphical display of the simulation environment. It refreshes the on-screen information such as the vehicle's position, sensor data, and other simulation elements. The task continues running until the ESC key is pressed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arg</td><td>Pointer used to determine the task's index.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns NULL.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Like the other tasks, execution time is tracked using runtime measurement calls. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
