\hypertarget{display_8h}{}\doxysection{include/display.h File Reference}
\label{display_8h}\index{include/display.h@{include/display.h}}


Header file declaring display rendering functions.  


This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=334pt]{display_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structButton}{Button}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{display_8h_afd296c470a4af69caa281bd5ecd5212e}{num\+\_\+buttons}}~5
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{display_8h_a264238ff7dcf301bbc2f190ea7dcea4c}{draw\+\_\+dir\+\_\+arrow}} ()
\begin{DoxyCompactList}\small\item\em Draws a directional arrow. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display_8h_a01a4e859fcc5ddef923afe9a8a674826}{draw\+\_\+car}} (float \mbox{\hyperlink{globals_8c_a4a4a6918df3caa78a889c76207349a02}{car\+\_\+x}}, float \mbox{\hyperlink{globals_8c_a2ff6267ace75a40353ce62fdb02b9e67}{car\+\_\+y}}, int \mbox{\hyperlink{globals_8c_ad9878a31df3b8d7db61cf55b7eb07cd4}{car\+\_\+angle}})
\begin{DoxyCompactList}\small\item\em Draws a car shape on the display. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display_8h_a92e08b949df5d8a8e5edec1dd86bc360}{draw\+\_\+track}} ()
\begin{DoxyCompactList}\small\item\em Draws the track. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display_8h_a5c07cb2dc1adb076383bced84f4a8154}{draw\+\_\+lidar}} (\mbox{\hyperlink{structpointcloud__t}{pointcloud\+\_\+t}} $\ast$\mbox{\hyperlink{globals_8c_a6579cbc24dcb1c6ec71ccdcf287e01f7}{measures}})
\begin{DoxyCompactList}\small\item\em Draws lidar measurements. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display_8h_a298532c4740f2a6785e5c1b0ff7fea9a}{draw\+\_\+detected\+\_\+cones}} (\mbox{\hyperlink{structcone}{cone}} $\ast$\mbox{\hyperlink{group__PerceptionModule_gaab5237f191baaef95b94ad0686b40aa6}{detected\+\_\+cones}})
\begin{DoxyCompactList}\small\item\em Draws detected cones. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display_8h_aa45d316f5e50fa968e686d790d57457b}{draw\+\_\+cone\+\_\+map}} (\mbox{\hyperlink{structcone}{cone}} $\ast$\mbox{\hyperlink{group__PerceptionModule_gaefe2c104bad3e859c0f123af113abc22}{track\+\_\+map}}, int \mbox{\hyperlink{group__PerceptionModule_ga7b64bf8a899686d6bf0c7d6c65e9d522}{track\+\_\+map\+\_\+idx}})
\begin{DoxyCompactList}\small\item\em Draws the cone map (track map). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display_8h_acd5437d29ba24cfc00dbd2f9f6b0cd28}{draw\+\_\+perception}} ()
\begin{DoxyCompactList}\small\item\em Draws perception results. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display_8h_a2d077fa92b741d504d6ef5c5f2fdd74c}{draw\+\_\+trajectory}} (\mbox{\hyperlink{structwaypoint}{waypoint}} $\ast$\mbox{\hyperlink{trajectory_8c_a525ffa7b5c81396c8024ff1f8d9e7015}{trajectory}})
\begin{DoxyCompactList}\small\item\em Draws the planned trajectory. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{display_8h_aa2eb9ba074b23fc3b4a91c98e0c83c8b}{update\+\_\+display}} ()
\begin{DoxyCompactList}\small\item\em Updates the display. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{display_8h_a8d31ca92b9f08b9b8dc134fdbd743bdd}{btn\+\_\+state\+\_\+cones}}
\item 
int \mbox{\hyperlink{display_8h_affd8bbaa3d95ef6b438022021db1c543}{btn\+\_\+state\+\_\+perception}}
\item 
int \mbox{\hyperlink{display_8h_ac5570a5cf15524c61e14cffd271dbf78}{btn\+\_\+state\+\_\+map}}
\item 
int \mbox{\hyperlink{display_8h_a9910257ef3a26317a779fc9e77d41d58}{btn\+\_\+state\+\_\+traj}}
\item 
int \mbox{\hyperlink{display_8h_a02a9f77d39f15a1769d8dba7aec487cb}{btn\+\_\+state\+\_\+autonomous}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Header file declaring display rendering functions. 

This file contains declarations for functions that handle the drawing of various display elements including car representation, lidar measurements, track, perception, trajectory, and more. These functions provide an interface for visualizing simulation data.

\begin{DoxyNote}{Note}
This header relies on types and globals defined in \char`\"{}globals.\+h\char`\"{}. 
\end{DoxyNote}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{display_8h_afd296c470a4af69caa281bd5ecd5212e}\label{display_8h_afd296c470a4af69caa281bd5ecd5212e}} 
\index{display.h@{display.h}!num\_buttons@{num\_buttons}}
\index{num\_buttons@{num\_buttons}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{num\_buttons}{num\_buttons}}
{\footnotesize\ttfamily \#define num\+\_\+buttons~5}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{display_8h_a01a4e859fcc5ddef923afe9a8a674826}\label{display_8h_a01a4e859fcc5ddef923afe9a8a674826}} 
\index{display.h@{display.h}!draw\_car@{draw\_car}}
\index{draw\_car@{draw\_car}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{draw\_car()}{draw\_car()}}
{\footnotesize\ttfamily void draw\+\_\+car (\begin{DoxyParamCaption}\item[{float}]{car\+\_\+x,  }\item[{float}]{car\+\_\+y,  }\item[{int}]{car\+\_\+angle }\end{DoxyParamCaption})}



Draws a car shape on the display. 


\begin{DoxyParams}{Parameters}
{\em car\+\_\+x} & X-\/coordinate of the car\textquotesingle{}s position. \\
\hline
{\em car\+\_\+y} & Y-\/coordinate of the car\textquotesingle{}s position. \\
\hline
{\em car\+\_\+angle} & Orientation angle of the car (typically in degrees).\\
\hline
\end{DoxyParams}
Renders a graphical representation of the car using its position and orientation.

Draws a car shape on the display.

Calculates the proper position for the car sprite based on its coordinates in the world space (scaled by pixels per meter) and draws it using Allegro\textquotesingle{}s rotate\+\_\+scaled\+\_\+sprite function. In DEBUG mode, the function also draws view angle lines to indicate the car\textquotesingle{}s field of view.


\begin{DoxyParams}{Parameters}
{\em car\+\_\+x} & The car\textquotesingle{}s x-\/coordinate in world units. \\
\hline
{\em car\+\_\+y} & The car\textquotesingle{}s y-\/coordinate in world units. \\
\hline
{\em car\+\_\+angle} & The car\textquotesingle{}s angle in degrees. \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=297pt]{display_8h_a01a4e859fcc5ddef923afe9a8a674826_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{display_8h_a01a4e859fcc5ddef923afe9a8a674826_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{display_8h_aa45d316f5e50fa968e686d790d57457b}\label{display_8h_aa45d316f5e50fa968e686d790d57457b}} 
\index{display.h@{display.h}!draw\_cone\_map@{draw\_cone\_map}}
\index{draw\_cone\_map@{draw\_cone\_map}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{draw\_cone\_map()}{draw\_cone\_map()}}
{\footnotesize\ttfamily void draw\+\_\+cone\+\_\+map (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structcone}{cone}} $\ast$}]{track\+\_\+map,  }\item[{int}]{track\+\_\+map\+\_\+idx }\end{DoxyParamCaption})}



Draws the cone map (track map). 


\begin{DoxyParams}{Parameters}
{\em track\+\_\+map} & Pointer to an array of cone structures representing the map. \\
\hline
{\em track\+\_\+map\+\_\+idx} & Index representing the current position or number of cones on the track map.\\
\hline
\end{DoxyParams}
This function displays the cone-\/based track map, helping the user to visualize the layout and key points along the track.

Draws the cone map (track map).

Iterates through the track map data and draws a white filled circle at each cone\textquotesingle{}s position, properly mapping simulation world coordinates to the perception window.


\begin{DoxyParams}{Parameters}
{\em track\+\_\+map} & Pointer to an array of cones representing the track map. \\
\hline
{\em track\+\_\+map\+\_\+idx} & The number of valid entries in the track map array. \\
\hline
\end{DoxyParams}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{display_8h_aa45d316f5e50fa968e686d790d57457b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{display_8h_a298532c4740f2a6785e5c1b0ff7fea9a}\label{display_8h_a298532c4740f2a6785e5c1b0ff7fea9a}} 
\index{display.h@{display.h}!draw\_detected\_cones@{draw\_detected\_cones}}
\index{draw\_detected\_cones@{draw\_detected\_cones}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{draw\_detected\_cones()}{draw\_detected\_cones()}}
{\footnotesize\ttfamily void draw\+\_\+detected\+\_\+cones (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structcone}{cone}} $\ast$}]{detected\+\_\+cones }\end{DoxyParamCaption})}



Draws detected cones. 


\begin{DoxyParams}{Parameters}
{\em detected\+\_\+cones} & Pointer to a cone structure that holds information about detected cones.\\
\hline
\end{DoxyParams}
Renders the detected cones on the display, which could represent position markers or obstacles in the simulation environment.

Draws detected cones.

Iterates through the array of detected cones and draws a filled circle at each cone\textquotesingle{}s location, after mapping the coordinates from the simulation world to the perception window.


\begin{DoxyParams}{Parameters}
{\em detected\+\_\+cones} & Pointer to an array of detected cone structures. \\
\hline
\end{DoxyParams}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{display_8h_a298532c4740f2a6785e5c1b0ff7fea9a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{display_8h_a264238ff7dcf301bbc2f190ea7dcea4c}\label{display_8h_a264238ff7dcf301bbc2f190ea7dcea4c}} 
\index{display.h@{display.h}!draw\_dir\_arrow@{draw\_dir\_arrow}}
\index{draw\_dir\_arrow@{draw\_dir\_arrow}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{draw\_dir\_arrow()}{draw\_dir\_arrow()}}
{\footnotesize\ttfamily void draw\+\_\+dir\+\_\+arrow (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Draws a directional arrow. 

This function is used to render an arrow representing direction on the display. The arrow can be used as an indicator for direction in the simulation.

Draws a directional arrow.

Computes the arrow\textquotesingle{}s start (at the car\textquotesingle{}s position) and end points based on the car angle, using cosine and sine functions. The arrow shaft and head are drawn as thick green lines, with the head drawn at two angles to form a head shape. Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{display_8h_a264238ff7dcf301bbc2f190ea7dcea4c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{display_8h_a5c07cb2dc1adb076383bced84f4a8154}\label{display_8h_a5c07cb2dc1adb076383bced84f4a8154}} 
\index{display.h@{display.h}!draw\_lidar@{draw\_lidar}}
\index{draw\_lidar@{draw\_lidar}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{draw\_lidar()}{draw\_lidar()}}
{\footnotesize\ttfamily void draw\+\_\+lidar (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structpointcloud__t}{pointcloud\+\_\+t}} $\ast$}]{measures }\end{DoxyParamCaption})}



Draws lidar measurements. 


\begin{DoxyParams}{Parameters}
{\em measures} & Pointer to a \mbox{\hyperlink{structpointcloud__t}{pointcloud\+\_\+t}} structure containing lidar data.\\
\hline
\end{DoxyParams}
Processes and graphically displays the lidar data as a set of points or a cloud, allowing visualization of the detected obstacles or environment.

Draws lidar measurements.

Clears the perception bitmap and centers it on the car\textquotesingle{}s position. For each lidar measurement, computes the global-\/to-\/perception window mapping for the detected point and draws a line from the car\textquotesingle{}s center to that point. The color of the line depends on whether a cone was detected or not.


\begin{DoxyParams}{Parameters}
{\em measures} & Pointer to an array of lidar measurements. \\
\hline
\end{DoxyParams}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{display_8h_a5c07cb2dc1adb076383bced84f4a8154_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{display_8h_acd5437d29ba24cfc00dbd2f9f6b0cd28}\label{display_8h_acd5437d29ba24cfc00dbd2f9f6b0cd28}} 
\index{display.h@{display.h}!draw\_perception@{draw\_perception}}
\index{draw\_perception@{draw\_perception}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{draw\_perception()}{draw\_perception()}}
{\footnotesize\ttfamily void draw\+\_\+perception (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Draws perception results. 

This function is responsible for visualizing the outcomes of the perception process, which might include sensor fusion results or object detection overlays.

Draws perception results.

Combines the lidar lines, detected cones, and cone map visualizations to create the perception overlay. Afterwards, the perception bitmap is blended onto the main display buffer offset in relation to the car\textquotesingle{}s position. Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=336pt]{display_8h_acd5437d29ba24cfc00dbd2f9f6b0cd28_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{display_8h_acd5437d29ba24cfc00dbd2f9f6b0cd28_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{display_8h_a92e08b949df5d8a8e5edec1dd86bc360}\label{display_8h_a92e08b949df5d8a8e5edec1dd86bc360}} 
\index{display.h@{display.h}!draw\_track@{draw\_track}}
\index{draw\_track@{draw\_track}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{draw\_track()}{draw\_track()}}
{\footnotesize\ttfamily void draw\+\_\+track (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Draws the track. 

This function draws the track layout on the display, which might include boundaries, lanes, or other information necessary for simulation or visualization.

Checks that the track bitmap has valid dimensions, and if so, draws the track image onto the display buffer. If the bitmap dimensions are invalid, an error message is shown. Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{display_8h_a92e08b949df5d8a8e5edec1dd86bc360_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{display_8h_a2d077fa92b741d504d6ef5c5f2fdd74c}\label{display_8h_a2d077fa92b741d504d6ef5c5f2fdd74c}} 
\index{display.h@{display.h}!draw\_trajectory@{draw\_trajectory}}
\index{draw\_trajectory@{draw\_trajectory}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{draw\_trajectory()}{draw\_trajectory()}}
{\footnotesize\ttfamily void draw\+\_\+trajectory (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structwaypoint}{waypoint}} $\ast$}]{trajectory }\end{DoxyParamCaption})}



Draws the planned trajectory. 


\begin{DoxyParams}{Parameters}
{\em trajectory} & Pointer to an array of waypoint structures representing the planned path.\\
\hline
\end{DoxyParams}
Visualizes the computed trajectory on the display, providing insight into planned routes or maneuvers.

Draws the planned trajectory.

Clears and sets the background for the trajectory bitmap and iterates over each trajectory waypoint, drawing each as a filled circle. In DEBUG mode, the waypoint index is also displayed and an extra line is drawn from the car sprite center.


\begin{DoxyParams}{Parameters}
{\em trajectory} & Pointer to an array of waypoint structures representing the car\textquotesingle{}s trajectory. \\
\hline
\end{DoxyParams}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{display_8h_a2d077fa92b741d504d6ef5c5f2fdd74c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{display_8h_aa2eb9ba074b23fc3b4a91c98e0c83c8b}\label{display_8h_aa2eb9ba074b23fc3b4a91c98e0c83c8b}} 
\index{display.h@{display.h}!update\_display@{update\_display}}
\index{update\_display@{update\_display}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{update\_display()}{update\_display()}}
{\footnotesize\ttfamily void update\+\_\+display (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Updates the display. 

This function refreshes the display, ensuring that all drawn elements are updated according to the latest simulation data.

Updates the display.

Locks the drawing mutex and sequentially renders the background, track, car, perception, trajectory, title text, and controls on the display buffer. Once all elements are rendered, the display buffer is blitted to the screen, and the mutex is subsequently unlocked. Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{display_8h_aa2eb9ba074b23fc3b4a91c98e0c83c8b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{display_8h_aa2eb9ba074b23fc3b4a91c98e0c83c8b_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{display_8h_a02a9f77d39f15a1769d8dba7aec487cb}\label{display_8h_a02a9f77d39f15a1769d8dba7aec487cb}} 
\index{display.h@{display.h}!btn\_state\_autonomous@{btn\_state\_autonomous}}
\index{btn\_state\_autonomous@{btn\_state\_autonomous}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{btn\_state\_autonomous}{btn\_state\_autonomous}}
{\footnotesize\ttfamily int btn\+\_\+state\+\_\+autonomous\hspace{0.3cm}{\ttfamily [extern]}}

\mbox{\Hypertarget{display_8h_a8d31ca92b9f08b9b8dc134fdbd743bdd}\label{display_8h_a8d31ca92b9f08b9b8dc134fdbd743bdd}} 
\index{display.h@{display.h}!btn\_state\_cones@{btn\_state\_cones}}
\index{btn\_state\_cones@{btn\_state\_cones}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{btn\_state\_cones}{btn\_state\_cones}}
{\footnotesize\ttfamily int btn\+\_\+state\+\_\+cones\hspace{0.3cm}{\ttfamily [extern]}}

\mbox{\Hypertarget{display_8h_ac5570a5cf15524c61e14cffd271dbf78}\label{display_8h_ac5570a5cf15524c61e14cffd271dbf78}} 
\index{display.h@{display.h}!btn\_state\_map@{btn\_state\_map}}
\index{btn\_state\_map@{btn\_state\_map}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{btn\_state\_map}{btn\_state\_map}}
{\footnotesize\ttfamily int btn\+\_\+state\+\_\+map\hspace{0.3cm}{\ttfamily [extern]}}

\mbox{\Hypertarget{display_8h_affd8bbaa3d95ef6b438022021db1c543}\label{display_8h_affd8bbaa3d95ef6b438022021db1c543}} 
\index{display.h@{display.h}!btn\_state\_perception@{btn\_state\_perception}}
\index{btn\_state\_perception@{btn\_state\_perception}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{btn\_state\_perception}{btn\_state\_perception}}
{\footnotesize\ttfamily int btn\+\_\+state\+\_\+perception\hspace{0.3cm}{\ttfamily [extern]}}

\mbox{\Hypertarget{display_8h_a9910257ef3a26317a779fc9e77d41d58}\label{display_8h_a9910257ef3a26317a779fc9e77d41d58}} 
\index{display.h@{display.h}!btn\_state\_traj@{btn\_state\_traj}}
\index{btn\_state\_traj@{btn\_state\_traj}!display.h@{display.h}}
\doxysubsubsection{\texorpdfstring{btn\_state\_traj}{btn\_state\_traj}}
{\footnotesize\ttfamily int btn\+\_\+state\+\_\+traj\hspace{0.3cm}{\ttfamily [extern]}}

